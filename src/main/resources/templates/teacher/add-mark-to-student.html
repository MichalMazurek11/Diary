<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" >
<head th:insert="fragments.html :: headerfiles">
</head>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
<body>
<header th:insert="fragments.html :: nav"></header>
<div class="container">
    <div
            style="width: 600px; margin-left: auto; margin-right: auto; margin-top: 24px; padding: 24px;">
        <div class="card">
            <div class="card-block" style="padding: 24px;">

                <form th:action="@{'/home/teacher/lekcja/' + ${lessonHour.id} +'/dodaj_nowa_ocene'}" th:object="${lessonHour}"  method="post" >
                    <fieldset>
                        <center><h6>Wpisz ocenę</h6></center>
                        <br>
                        <div class="form-group">
                            <label for="valueList">Semestr: </label>
                            <select class="form-control" id="termList" name="termList"  >
                                <option  th:each="term : ${termList}"
                                         th:value="${term.name()}"
                                         th:text="${term.name()}"></option>
                            </select>
                        </div>
                        <div class="form-group">
                        <label for="typeMarkList">Rodzaj: </label>
                        <select class="form-control" id="typeMarkList" name="typeMarkList"  >
                            <option  th:each="type : ${typeMarkList}"
                                     th:value="${type}"
                                     th:text="${type.getText()}"></option>
                        </select>
                        </div>
                        <div class="form-group">
                            <label for="valueList">Ocena: </label>
                            <select class="form-control" id="valueList" name="valueList"  >
                                <option  th:each="value : ${valueList}"
                                         th:value="${value}"
                                         th:text="${value}"></option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="studentList">Uczeń: </label>
                            <select class="form-control" id="studentList" name="studentList"  >
                                <option  th:each="student,iter : ${studentList}"
                                         th:value="${student.id}" th:text="${iter.count}+' '+ ${student.firstName + ' ' + student.lastName}"></option>
                            </select>
                            <br/>
                        </div>
                    </fieldset>

                    <span  align="center" th:if="${messageError}">	<div class="alert alert-danger" role="alert"><span th:text="${messageError}"></span></div></span>
                    <span  align="center" th:if="${messageSuccess}">	<div class="alert alert-success" role="alert"><span th:text="${messageSuccess}"></span></div></span>

                    <div class="form-actions" style="margin-top: 12px;"><button  type="submit" style="float: right;" class="btn btn-primary">Dodaj ocenę</button></div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
<br/>
<div   class="table-responsive">

    <table  class="table table-bordered text-center">
        <thead>
        <tr class="bg-light-gray">
            <th class="text-uppercase">LP</th>
            <th class="text-uppercase">Przedmiot</th>
            <th class="text-uppercase">Oceny SEMESTR I</th>
            <th class="text-uppercase">Ocena semestralna</th>
            <th class="text-uppercase">Oceny SEMESTR II</th>
            <th class="text-uppercase">Ocena roczna</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="entry,iterStat : ${hashMap}" >
            <td th:text="${iterStat.count}"></td>
            <td th:text="${entry.key.firstName}"></td>
            <td> <span th:each="mapentry : ${entry.value}"><span th:if="${mapentry.termValue.name() == 'SEMESTR_I'}">
                        <a th:text="${mapentry.value+', '}" th:href="@{'/home/teacher/ocena_z_przedmiotu/edytuj/'+ ${mapentry.id}}"></a></span></span>
            </td>
            <td>
                        <span th:each="mapentry : ${entry.value}"><span th:if="${mapentry.proposedMark != null && mapentry.termValue.name() == 'SEMESTR_I'}" >
                            <span th:text="${mapentry.proposedMark}"> </span>
                        </span>
                        </span>

            </td>

            <td>
                        <span th:each="mapentry : ${entry.value}"><span th:if="${mapentry.termValue.name() == 'SEMESTR_II'}">
                        <a th:text="${mapentry.value+', '}" th:href="@{'/home/teacher/ocena_z_przedmiotu/edytuj/'+ ${mapentry.id}}"></a></span></span>

            </td>

            <td>
                        <span th:each="mapentry : ${entry.value}"><span th:if="${mapentry.markForTermTwo != null && mapentry.termValue.name() == 'SEMESTR_II'}">
                        <span th:text="${mapentry.markForTermTwo}"></span>
                        </span>
                        </span>
            </td>
        </tbody>
    </table>
    <br/>
    </form>


</div>


</div>







<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

</body>
</html>
